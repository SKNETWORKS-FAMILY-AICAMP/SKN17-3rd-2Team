# SKN17-3rd-2Team
------
# 1️⃣ 팀 소개 
## 팀명 : ROOM MATE 
" 팀  소개 " 

## 팀원 소개 
| 김주서 | 김태완 | 성기혁 | 양송이 | 임산별 |
|:---:|:---:|:---:|:---:|:---:|
|  |  |  |  | |
|[@Subin-Ju](https://github.com/Subin-Ju)||[@minjeon](https://github.com/minjeon)|[@use08168](https://github.com/use08168)|[@ImMountainStar](https://github.com/ImMountainStar)|
|[@](https://github.com/Subin-Ju)||[@Kicangel](https://github.com/Kicangel)|[@use08168](https://github.com/use08168)|[@ImMountainStar](https://github.com/ImMountainStar)|


# 2️⃣ 프로젝트 개요 
## 2.1 프로젝트 명 : 챗봇 이름 
청년과 신혼부부를 위한 주택청약 도우미 챗봇 

## 2.2 프로젝트 소개 
사용자가 복잡한 청약 절차를 손쉽게 이해하고, 본인 조건에 맞는 물량과 주거지원까지 바로 확인할 수 있는 통합형 챗봇 서비스

## 2.3 프로젝트 필요성 
#### 프로젝트 배경 : 상황분석
(1) 주택청약의 공급과 수요 증가 
> **청약통장 가입자, 2년 9개월 만에 증가…·청약 혜택 확대 통했나**  
> 3월 가입자 전월 대비 4435명 증가…
> 3기 신도시 기대감  
> 정부, 청년·신혼부부 청약 혜택 확대  
>  
> *박영규 기자, [이코노믹리뷰](https://www.econovill.com/news/articleView.html?idxno=693037), 2025.04.22 23:14*
> 
(2) 주택청약 제도의 복잡함으로 인한 사용자의 불편함 존재 
- 잦은 제도 개편과 복잡한 공급방식 및 자격 요건으로 복잡도 증가
- 다양한 공급방식과 공급처로 인해 정보가 산발적으로 존재함
=> 사용자의 주택청약 신청과정이 복잡함

<이미지> 

#### 프로젝트 배경 : 문제 상황 
-  맞춤형 정보 접근성의 한계
-   청약 프로세스의 복잡성
<br>
<br>
## 2.4 프로젝트 목적 
- 주택청약 공식 문서 데이터 기반의 대화를 통해 정확하고 신뢰도 높은 정보 제공
- 사용자와의 대화 메모리를 통해 개인 조건에 적합한 공고 및 청약 매물 , 주거 지원 정책 추천
- 사용자 맞춤형 공고 추천, 매물, 주거지원정책, 주택청약 기본정보 단계를 통합적으로 지원
<br>
<br>
# 3️⃣ 기술스택 및 사용한 모델 

# 4️⃣ 시스템 아키텍쳐

# 5️⃣ WBS 

# 6️⃣ 요구사항명세서 


# 7️⃣ 데이터 소개 및 전처리 보고서 
## 7.1 데이터 소개 <br>
#### (1) 주택청약 공고문 
- **데이터 출처** : [한국토지주택공사(LH)](https://www.lh.or.kr/main/)  
  *SH는 현재 모집중인 공고가 없으므로 제외함*
- **데이터 수집 방법** : 문서 직접 다운로드

[데이터 파일 목록]
| 구분 | 파일명 | 데이터 형식 |
|------|--------|-------------|
| **청년 매입임대** | 25년 3차_청년 매입임대_모집공고문 | pdf |
|  | 25년_3차_청년 매입임대_QnA | hwp |
|  | 서울지역본부_청년매입임대_신청시_유의사항 | pdf |
|  | 25년_3차_청년매입임대_공급주택목록 | excel |
| **신혼/신생아 매입임대Ⅰ** | 25년 3차_신혼/신생아1 매입임대_모집공고문 | pdf |
|  | 25년_3차_신혼/신생아1 매입임대_QnA | hwp |
|  | 서울지역본부_신혼/신생아1 매입임대_신청시_유의사항 | pdf |
|  | 25년_3차_신혼/신생아1 매입임대_공급주택목록 | excel |
| **신혼/신생아 매입임대Ⅱ (전세형)** | 25년 3차_신혼/신생아2 매입임대_모집공고문 | pdf |
|  | 25년_3차_신혼/신생아2 매입임대_QnA | hwp |
|  | 서울지역본부_신혼/신생아2 매입임대_신청시_유의사항 | pdf |
|  | 25년_3차_신혼/신생아2 매입임대_공급주택목록 | excel |

[전처리]
1. 모집 공고문, QnA , 신청시 유의사항 파일
   - pdf 파일 텍스트 변환
   - 불필요한 별첨 파일 제거
   - 테이블 표 텍스트 형태 변환
   - 특수기호 제거
2. 공급주맥 목록 파일
  - 필요없는 칼럼(지자체, 주택열람일정) 제거
  - 각 칼럼을 메타데이터로 하는 json 형식변환

[전처리 결과]

<br>

#### (2) 대출정보 데이터 
- **데이터 출처** : 주택도시기금  
- **데이터 설명** : [주택도시기금 사이트](https://nhuf.molit.go.kr/)  
- **데이터 수집 방식** : 사이트 내 정보 문서화

[데이터 목록]
| 데이터명 | 데이터 형식 |
| --- | --- |
| 1. 청년전용_보증부월세대출 | docx |
| 2. 청년전용_버팀목전세자금 | docx |
| 3. 신생아_특례_버팀목대출| docx |
| 4. 주거취약계층_이주지원_버팀목전세자금 | docx |
| 5. 전세피해_임차인_버팀목전세자금 | docx |
| 6. 전세피해임차인대상_버팀목전세대출대환| docx |
| 7. 전세사기피해자_최우선변제금버팀목_전세자금_대출 | docx |
| 8. 주거안정월세대출| docx |
| 9. 신혼부부전용_전세자금 | docx |
| 10. 버팀목전세자금| docx |
| 11. 갱신만료_임차인_지원_버팀목전세자금 | docx |
| 12. 전세금안심대출보증 | docx |

[전처리]
1. 불필요 별첨 파일 제거
2. pdf파일 텍스트 변환
3. 테이블 표 텍스트 형태로 변환

[전처리 결과]

#### (3) 주택청약 FAQ 
[전처리]
1. 불필요 별첨 파일 제거
2. 테이블 표 텍스트 형태로 변환
3. { “Num”:””, ‘Quetsion’: “”, “Answer”:””} json 형태로 변환

[전처리 결과]

# 8️⃣ DB 연동 구현 코드
[Vector DB](https://github.com/SKNETWORKS-FAMILY-AICAMP/SKN17-3rd-2Team/blob/main/Embedding)
# 9️⃣ 테스트 계획서 및 결과서 

# 🔟 진행 과정 중 프로그램 개선 노력
😒개선 전 문제점
- Chunk내의 문맥이 유지 되지 않고, Chunk size가 적절하지 않아 응답의 질이 많이 떨어짐
- Vector DB 내에 유사한 문서들이 많이 존재해 원하는 문서를 가져오지 않음
- 핵심 키워드 (예: 주소 정보; '강동구')를 감지 하지 못해 Hallucination이 발생
- Chat history가 계속 쌓여 나감에 따라, 프롬프트 길이가 증가해 응답 속도 저하 및 토큰 비용 증가함
- '그 집 정보좀 줘'와 같은 짧고 모호한 질문을 이해하지 못
  
<details>
  <summary>1.Chunking</summary> 
 - RecursiveSplitter를 사용하면 chunk 안의 내용의 문맥이 이어지지 않는 경우가 많음
 - 먼저 SemanticChunker를 이용해 chunk 안의 내용의 문맥을 유지하게 만든 후, chunk size가 크다면 RecursiveSplitter를 이용해 chunk size를 줄이는 작업을 진행
</details>

<details>
  <summary>2.벡터 DB Collection 활용</summary>
 - 내용이 비슷한 문서 데이터 (신혼/신생아1 매입임대_모집공고문, 신혼/신생아2 매입임대_모집공고문)를 한 Collection 안에 저장할 경우, 잘못된 데이터를 가져오는 경우가 발생
 - 또한 공실 데이터 문서 내에 단순 주소 데이터만 존재하기 때문에, 각 문서들을 특정할 수 없어 잘못된 데이터를 가져오는 경우가 발생
 - 따라서, 같은 자격 유형에 따라 Collection을 분리한뒤 해당하는 문서 데이터들을 저장함으로서, 환각 현상 및 잘못된 데이터 로드 현상을 해결함
</details>

<details>
  <summary>3.Metadata를 이용한 필터링</summary>
 - 사용자가 선호 지역에 대한 질의를 할 경우 (예:강동구에 있는 공실 주택 정보를 알려줘), '강동구'라는 핵심 키워드를 이용해 알맞은 데이터를 로드해야하는데, retriever가 이를 원만히 수행하지 못함
 - 따라서, metadata를 활용해 벡터 DB를 필터링하여, 직접 '강동구' 주택 정보를 가져오게끔 만듬
</details>

<details>
  <summary>4. Chat History 길이 제한</summary>
 필요성 : Context Window는 유한하기 때문에, 최근 6 턴만 대화내용 유지
 Hallucination 발생 가능성 증가 : 오래된 맥락이 남아 있으면, 모델이 불필요한 정보까지 섞어 답할 확률이 높아진다
 비용 및 속도 감소 : 프롬프트의 길이가 줄어 추론 시간이 단축 및 토큰 비용 절약 
</details>

<details>
  <summary>5.독립질문 설정</summary>
 대화 맥락에 의존하던 마지막 사용자 질문을, <b>문맥 없이도 이해 가능한 한 문장으로 재작성한 질문</b><br>
 <br> 그 집의 보증금은? 같은 질문은 맥락 없이 모호, 따라서 독립 질문으로 변환
 예시 
- 원문 : '그 집 보증금 정보를 알려줘?'
- 히스토리 요약 : 앞서 강서구 주소 정보 얘기중
- 독립 질문 : '강서구 아파트 보증금 정보를 알려줘'
- 효과 : 짧고 모호한 질문에 대해 응답의 질이 좋아진다 
</details>

⭐ 기대 효과
- 개인화된 상호작용 : 사용자 맥락을 반영해 맞춤형 주택 정보, 정책 및 대출 상품 제공
- 접근성 확대 : 사용자 상황 및 주택 위치에 따라 달라지는 정보들과 데이터가 모여 있지 않아 검색의 복잡함을 간단한 인터페이스를 통해 필요한 정보에 쉽게 접근 가능
  
# 🛠️향후 개선점
1. 서울 특별시 주택 정보에 국한된 것이 아닌 전국 주택 정보로 확장
2. 응답 속도 최적화
3. 파인 튜닝 진행

# 12. 수행결과 (테스트/시연 페이지)
